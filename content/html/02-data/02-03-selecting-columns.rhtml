<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/stylesheet.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<link rel="stylesheet"
      href="../highlight/styles/default.min.css">
<script src="../highlight/highlight.js"></script>
<script src="../functions.js"></script>
<script>hljs.highlightAll();</script>
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-bar-block .w3-bar-item {padding:20px}
</style>
</head>
<body class="w3-round-large">

<!-- Top menu -->
<div class="w3-top">
  <div class="w3-navy w3-xlarge" 
  style="max-width:auto;margin:auto;border:1px w3-gray"
  border:1px>
    <div class="w3-button w3-padding-16 w3-left" onclick="w3_open()">â˜°</div>
    <div class="w3-right w3-padding-16" style="padding-right:10px">EEB </div>
    <div class="w3-center w3-padding-16">The R Manual</div>
  </div>
</div>

<!-- Sidebar (hidden by default) -->
<nav class="w3-sidebar w3-bar-block w3-card w3-top w3-xlarge w3-animate-left" 
style="display:none;z-index:2;width:40%;min-width:300px" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()"
  class="w3-bar-item w3-button">Close Menu</a>
  <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button">About</a>
  <a href="#contact" onclick="w3_close()" 
  class="w3-bar-item w3-button">Contact</a>
</nav>

<main style = margin-top:100px>
    <nav class="section-nav">
        <ol>
          <li><a href="#select">Selecting Columns</a>
          </li>
          <li><a href="#select-filter">Selecting &amp; Filtering</a></li>
        </ol>
      </nav>
    <div>
    <section>
        <h2>Selecting Columns in a DataFrame</h2>
        <!--begin.rcode, echo=FALSE
        options(tidyverse.quiet = TRUE)
        end.rcode-->
        <p>
            Often it is useful to be able to select only a select number of columns in a dataframe, in conjunction or separately from filtering the rows of a dataframe. We can do this to simply re-size the dataframe to only what we need for a particular future analysis, or to isolate the part of a dataframe we need to perform other operations on. 
        </p>
    </section>
    <section id="select">
        <h3>Selecting Columns</h3>
        <p>
            To do this, we can select a particular set of columns. Let's use the ice dataframe example from the <code>lterdatasampler</code> package: 
            <br>
            <!--begin.rcode
            # load packages 
            library(lterdatasampler)
            library(tidyverse)

            # load in dataframe we'll work with
            ice <- lterdatasampler::ntl_icecover
            end.rcode-->
            <br>
            We can look at the columns in this dataframe: 
            <br>
            <!--begin.rcode
            names(ice)
            end.rcode-->
            <br>
            We may want to make a smaller dataframe with only the columns <code>year</code> and <code>ice_duration</code> . We can do this with the <code>dplyr</code> function <code>select()</code> :
            <br>
            <!--begin.rcode
            small_ice <- ice %>% 
            dplyr::select(year, ice_duration)
            names(small_ice)
            end.rcode-->
            <br>
            And we can see this works as expected. 
        </p>
    </section>
    <section id="select-filter">
        <h3>Selecting & Filtering</h3>
        <p>
            It is always useful to be able to perform multiple operations on a dataframe at once, since it's rarely the case that we only need to do a single thing before our data object is ready for analysis. 
            <br>
            <br>
            We can "pipe" our operations together using the <code>dplyr</code> pipes. For example, we could select the same columns as we did already, but also filter <code>ice_duration</code> at the same time. Let's see what values that variable can take on: 
            <br>
            <!--begin.rcode
            # hist() will just give us a histogram of the values
            hist(ice$ice_duration)
            end.rcode-->
            <br>
            So we might want to filter our data to only values below 100. We can do that like this: 
            <br>
            <!--begin.rcode
            filtered_ice <- ice %>% 
            dplyr::filter(ice_duration < 100) %>% 
            dplyr::select(year, ice_duration)
            end.rcode-->
            <br>
            Now we can look at the columns we have in this new object and also what values <code>ice_duration</code> takes on to check it worked correctly: 
            <br>
            <!--begin.rcode
            names(filtered_ice)
            hist(filtered_ice$ice_duration)
            end.rcode-->
            <br>
            We can see this worked as expected!
        </p>
    </section>
<!-- End page content -->
<hr>
<p style="font-size:10px;color:gray;text-align:center">
    <br>
    <br>
    The EEB R Manual is the work of researchers at the University of the Toronto
     and intended as a purely educational resource. It holds no official 
    association with the R Foundation. It should not be taken as an
     authority on R best practices. 
    <br>
    When using this resource, <bold>always</bold> default to instructions and 
    guidance provided by your instructor. 
    <br>
    This content is reviewed regularly for errors and to make improvements, if you see an error and want to help us make this better, see the Contact Page
</p>
</div>

<script>
// Script to open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
}
 
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
}
</script>
</main>

</body>
</html>